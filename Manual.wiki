#summary 簡易マニュアル
#labels Featured

=Manual (version 0.9.7)=
<wiki:toc max_depth="3" />

0.9.7用 *簡易* マニュアルです。<br>

== Startup ==
生放送のページでコンテキストメニューを出し、NicoLive Helperを選択します。<br>
どこのページからでもウィンドウを開くことができますが、そのとき(生放送に接続しないとき)は生主として動作しています。事前のストック準備などに。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/nico_startup.png

==ツールバー==
http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/toolbar.png

左から、「プレイスタイル」、「リクエスト可否」、「次の動画の再生」、「自動再生の一時停止」、「動画の再生を停止」、「サウンドオンリー」、「メイン、サブ画面の交換(/swap)」、「サブ画面」、「コマンド(ニコ生の各種コマンドリスト)」、「設定」、「NicoLive Helperのウィンドウリスト」

自動再生では、リクエスト→ストックの優先で再生していきます。つまり、リクエストがあるかぎりはストックは一切再生されませんので、主セレ混ぜてランダム再生したい場合は、リクエストに登録しておく必要があります。

*手動再生*
 「再生」ボタンかツールバー「次曲」ボタンを押すことで、順次再生します
*自動(順次)*
 リクエスト→ストックの優先で、自動で上から順次再生します
*自動(ランダム)*
 リクエスト→ストックの優先で、自動でランダムに再生します
*手動(ランダム)*
 「再生」ボタンか、ツールバー「次曲」ボタンを押すことでランダムに再生します。
*手動(消化数順)*<br>
*自動(消化数順)*
 リスナーのリクエストの消費数順で再生します。
 ストックからリクエストボタンによってリク追加したものは、リスナーのリクエストが全て消化されるまで再生されません。テキストボックスから動画IDを入力して追加したものはリクエスト消化数順再生の対象になります。

  * ランダム再生以外では先読み指定が効きます。

*次曲*
 次の動画を再生します。<br>「サブ画面」が押されていたらサブ画面で再生します。

*一時停止*
 自動再生を一時停止します。現在の動画の再生が終わっても、次曲を再生しません。<br>何か再生するまで自動再生は再開されません。

*停止*
 動画の再生を停止します(/stop)<br>「サブ画面」が押されていたらサブ画面の再生を停止します。

*サウンドオンリー(マイクアイコン)*
 サウンドオンリーにします。<br>「サブ画面」が押されていたらサブ画面をサウンドオンリーにします。

*メイン、サブ切り替え(矢印アイコン)*
 メイン、サブ画面を交換します(/swap)

*サブ画面*
 このチェックボタンが押されていると、
 再生、停止、サウンドオンリーをサブ画面に対して実行します。

*コマンド*
 アンケート、サウンドオンリー解除、などのコマンドのリストをいくつか置いています。

*設定*
 従来の基本設定タブも含め、全ての設定項目はここに集まっています。

*ウィンドウ*
 他のNicoLive Helperのウィンドウ一覧を表示して、そのウィンドウに移動できます。

||連続コメント||連続コメント用ウィンドウを開きます||
||アンケート(Lv25+)||公式のアンケート用ウィンドウを開きます||
||アンケート結果を表示する||/vote showresult を送ります||
||アンケート結果を消す||/vote stop を送ります||
||サウンドオンリーを止める(メイン)||/soundonly off を送ります||
||サウンドオンリーを止める(サブ)||/soundonly off sub を送ります||
||カメラ映像に切り替え||/play を送ります||
||運営コメントを消す||/cls を送ります||
||JSONファイルダウンロード||動画情報設定で指定したJSONファイルをダウンロードします||
||配信開始(Experimental)||配信開始します。公式コンソールで配信開始ボタンが押せない時にでも||
||強制生主モード(Experimental)||座席番号が急に変わったりして生主で動かないときの緊急用に||
||ウィンドウサイズを初期状態に戻す||ウィンドウサイズを720x512にします||


==リクエスト==
リスナーコメントで sm/nm番号が流れたときに、リクエストキューに追加されます。複数動画IDが含まれている場合は、先頭の1つが対象です。<br>
入力ボックスから追加する場合、sm/nm番号(複数可,sm0sm1sm2 みたいに連結されたままでも、どんなゴミが含まれても、(sm|nm+数字)で認識するので)を入力すると、リクエストキューに追加されます。<br>

  * 再生できなかった動画は「リク・再生エラー」に移動します。
  * リクエスト引き継ぎ用に、コンテキストメニューから残リクエストの動画IDをクリップボードにコピーできます。
  * リクエストにカーソルを持って行くと、チップヘルプで動画のビットレートを表示します。
  * 左下にあるプログレスバーでコンテキストメニューを出すと、再生中の動画をマイリスト登録できます。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_request.png

==ストック==
ストック(いわゆる主セレ)。マイリスト(公開マイリスト含む)からインポートできます。
公開マイリストの取り込みはマイリストのURLを入力欄に入れてください。<br>
灰色になっているものは再生済みのもの、ピンクのものは未再生のものです。
灰色のものは自動再生の対象になりません。

  * .txtのファイルをストックにドロップすると、テキストファイル内のsm/nm番号を読んでストックに追加します。
  * テキストファイルだけでなく、動画やマイリスのリンク、検索ページのタブもドロップできます。(<a href="http://www.nicovideo.jp/watch/sm9105183">sm9105183</a>)
  * カテゴリ別のランキングページのタブもドロップできます。
  * コンテキストメニューからは、P名設定などができます。
  * リクエストにカーソルを持って行くと、チップヘルプで動画のビットレートを表示します。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_stock_menu.png

===リクエスト・ストック内検索===

  * リクエスト、ストックは、CTRL+F で動画検索をすることができます。
  * F3 で次を検索します。
  * 検索対象は、画面に表示されている全てのテキストです。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/searchfromrequeststock.png


== リク・再生エラー ==

リクエスト受け付けを(縛り外などで)拒否した動画と、再生時にエラーとなった動画をリストアップします。

  * 白はリクエスト拒否
  * 灰色は再生エラー

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_errorrequest.png


== 再生履歴 ==
ボカロ系生放送のプレイリストスレッドに書き込みやすい体裁で、記録しています。<br>
動画IDを範囲選択してコンテキストメニューを出すと、マイリスト登録もできます。<br>
消去ボタンは、再生履歴を消去し、再生済みの動画も、再度、リクエストを受けとるようになります。

  * テキストボックスを編集しても *実際の再生履歴は消去されない* ので、消去ボタンを押して消去してください。
  * テキスト復旧は、内部の履歴データに基づいて再生履歴テキストを復旧します。<br>番組名は放送IDは記録されていないので、動画IDとタイトルのみの復旧になります。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_history.png

新しい再生履歴表示が追加されました。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_newhistory.png


== コメント ==
ただのコメントビューア。発言もできます。<br>
コンテキストメニューから *コテハン設定とコメントのコピー* ができます。

ここからコメントを発信する場合、アンカー指定のリクエスト受け付けを実行することができます。<br>
「>>10-20@5」と主コメすると、コメ番10～20の範囲で最大5個受け付けることになります。
「アンカー>>100-120@5つリク受け付けます」とか「アンカー>>100-120」(@がないときは受け付け個数制限なし)でもOK。<br>

  * 動画IDにカーソルを持って行くと、動画のブログ貼り付け用の表示が左下に現れます。(カーソル追従はできなかった)
  * 「>>開始コメ番-終了コメ番@受付個数」の形式が主コメに含まれていればOK
  * 有効なアンカー<br>「>>35-」コメ番35番以降<br>「>>35-50」コメ番35-50番<br>「>>35-@5」コメ番35番以降、リク5個まで
  * そういえば「>>35-」で始めたアンカー指定を停止させる手段がなかったな…。
  * アンカー指定でのリク受け付けは「リクエスト拒否」の状態でのみ行われます
  * アンカー指定中は「受け付けました」の自動応答はありません。ただし、受け付けエラーは自動応答します。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_comment_menu2.png

== 動画DB ==
ただの動画DB。条件指定して動画検索を行うことが出来ます。<br>
動画のDB登録は、マイリストまたは入力ボックスへの入力で行えます。
既存データの情報更新も登録で行います。データ更新は自動で行っていないため、適度に動画登録経由して情報更新してください。今後、改善される予定です。
リクエスト送信は、リスナーならコメント送信、主ならリクエストタブ行きです。

  * 検索実行ボタンを押さなくても勝手に検索を始めます。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/tab_moviedb.png

== 再生中動画のマイリス登録 ==

左下のプログレスバーのコンテキストメニューからマイリス登録を行うことができます。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/add_mylist.png

== 内蔵ブラウザ ==
そういえば、右ペインにブラウザがあったのを忘れていました。

  * 開くボタンで生放送のページを開きます
  * あとは通常のブラウザと同じようにリンクを辿って他のページに行くことも出来ます

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/browser.png

== NicoLive Helper Settings ==

=== 基本設定 ===

*接続時にジングルを再生する*
 Helper起動時、放送開始から3分未満、まだ何も再生されていない時に、5秒待ってから、指定の動画を再生します。<br>
コミュニティ毎にジングル動画を指定することができます。<br>
(ニコリクさんみたいにリストメニュー形式も用意してみたいところだが、要望次第)

  * ジングル動画IDの後ろに、/co0000 とコミュニティIDを記述すると、そのコミュ用のジングルになります。
  * コミュニティ指定がない動画IDは、その他のコミュニティで再生されます。
  * 「sm7113282 sm6941824/co154 sm6941769/co154 sm7113282/co154」開発主の例
  * co154 初音ミクコミュで生主する場合、sm6941824,sm6941769,sm7113282 の3つからランダムで選択して再生します。
  * それ以外のコミュでは sm7113282 を再生します。

*自動再生時、30分枠に収まるように再生する動画を選択する*
 30分枠に収まるように動画を選択して再生します。

*ただし、ロスタイムを考慮し、若干の枠オーバーを許容する*
 ロスタイム75秒あるものとして扱います。

*次の動画を再生するまでの待ち時間*
 動画と動画の間の待ち時間を入力します。

*1つの動画の最大再生時間*
 動画を再生する最大の時間を指定します。15分ある動画を自動で5分で切りたい時など。0は無制限です。

*リクエストに対して自動で運営コメントを返す*
 リクエストの受け付けについて運営コメントします。

*リクエストの新着(7日)制限を行う*
 現在時刻から秒単位で7日以内かどうかチェックしています(ぼか生基準と違う)

*1枠1人あたりのリクエスト受付数*
 １枠に1人あたりいくつのリクエストを許可するかを指定します。0は制限なしです。

*初音ミクのライブモード(開発主用)*
 初音ミクが歌うオリジナル曲やPVを受け付けます。そのうち推論エンジン&機械学習モデル採用して判定能力上げようかと。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/adv_basicsettings.png

=== 動画情報 ===
運営コメントで行う、動画情報をカスタマイズできます。
使用できるマクロは後述で。

  * コメ欄に動画IDを直接入力して再生したとき、動画情報を主コメしない設定は、ジングル動画の情報も出なくなります。(ジングル再生が動画ID直接入力再生と同じなので)

  * JSONファイルのあるURI(URL)にある先の、ファイルの中身は { "sm9": 値, "sm10": 値 } となっているものです。<br>ミクノ度の場合は、http://mikunopop.info/play/count.json など。
  * file:// でお使いのPC内のファイルも指定できます。
  * 動画情報のコメント{json}マクロで置換されます。
  * このファイルは、生主モードで起動するときに読み込みます。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/adv_movieinfo.png

=== P名ホワイトリスト ===

  * P名として認識したい文字列を、1行につき 1つずつ記入して、保存ボタンを押してください。
  * 内蔵のP名リストと併合して使用します。
  * Helper再起動後、有効になります。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/adv_pnamewhitelist.png

=== 運営コメント ===
リクエストを受けるときに応答する運営コメントをカスタマイズできます。

  * 空欄は運営コメントなしと同じです。
  * リクエスト制限によるリク拒否は、その理由を必ず主コメします。<br>(基本設定で「リクエストに対して自動で運営コメントを返す」にチェックしていない場合は除く)
  * 「連続コメント用テキストファイル保存先」は、連続コメントウィンドウでリストアップされたい.txtファイルのあるフォルダを指定します。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/adv_comment.png

=== リクエスト制限 ===
リクエストを受け付ける動画の条件(リク縛り)を指定します。<br>
指定した条件をプリセット名を指定して保存することができます。
プリセット名を入力し、登録ボタンを押してください。
プリセットを削除する場合は、削除したいプリセット名を入力し、削除ボタンを押してください。

登録ボタンを押した場合は、*プリセット読み込み*メニューに追加されています。<br>
削除ボタンを押した場合は、プリセット読み込みメニューからは項目は削除されません(面倒なので。そんな細かいところ修正しなくてもいいよね)が、Advanced Settingsを開き直すと消えています。

タグの条件では、(半角)空白区切りで OR 条件指定できます。完全一致ではなくて、部分一致です。<br>
  * *タグ「初音ミク 鏡音リン」を含む* と指定すると、タグに、初音ミクまたは鏡音リンがある動画を受け付けることができます。
  * *タグ「初音ミク」を含む、「名誉のランキング除外 歌ってみた」* と指定すると、だいたいぼからん基準。
  * *タグ「アイドルマスター」を含む、「紳士協定違反」を含まない* と指定すると、紳士協定違反を除いたアイドルマスター動画を受け付けることができます。

  * 0 と指定した項目は無視します。
  * 投稿日指定では、両方に同一の日時を使用したり、日時の前後関係が矛盾しているときに無視します。
  * 投稿日の始点は 0:00:00 から、終点は 23:59:59 までになっています。2007/08/01～2007/08/31 と範囲指定した場合、8/1 0:00:00 ～ 8/31 23:59:59 になります。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/adv_restrict.png

=== その他 ===
ユーザー生放送ではないものは、自動で開くことができません(一応、仕様)

  * コメントログを保存するときは、必ず保存先を指定しておいてください。
  * 3分前通知の方法を選択することができます。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/adv_etc.png

== 連続コメント ==

  * 運営コメント設定で指定されたフォルダにあるテキストファイル(.txt)をリストメニューで選択して、テキストボックスに読み込むことが出来ます。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/continuouscomment.png

== Firefoxツールメニュー ==

  * ツールメニュー内にNicoLive Helperを設け、視聴履歴を記録しています。
  * クリックすると生放送のページへジャンプします。

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/browseroverlay.png


== プレイリスト(おまけ) ==

生放送に接続していないオフライン時、
ストックの再生ボタンを押すと、ニコニコ動画でその動画を再生します。<br>
以降、ストックの最後に向かって、連続で再生します。


== 運営コメントのマクロ ==

||{title}  ||動画のタイトル||
||{view}   ||再生数        ||
||{comment}||コメント数    ||
||{mylist} ||マイリスト数  ||
||{mylistrate}||マイリスト率||
||{date}   ||投稿日時(yy:mm:dd hh:mm:ssの形式)||
||{length} ||再生時間(mm:ssの形式)      ||
||{tags}   ||タグ(35文字ちょいで改行される)||
||{pname}  ||P名(D名) 不明のときは空文字 ||
||{id}     ||動画ID        ||
||{description}||動画の説明文(先頭40文字まで)||
||{additional}||動画個別の追加情報||
||{requestnum}||リクエスト残数(数字のみ)||
||{requesttime}||リクエスト総時間 mm:ss の形式で||
||{stocknum}||ストック残数(未再生のもの)||
||{stocktime}||ストック総時間(未再生のもの) mm:ss の形式で||
||{json}||動画情報設定で指定した先のJSONファイルにある情報と置換します||
||{mylistcomment}||マイリストからストック追加した場合、マイリストコメントがあれば、マイリストコメントと置換します||

  * {additional}は、コンテキストメニューの「追加情報設定」から設定した任意の文字列に置換します。<br>ある動画に「○○発売中！」とか登録しておけば、{additional}の部分が「○○発売中！」に置換されて主コメが行われます。

===for Advanced users(上級者向け) 0.9.7以降===

{=_statement_} と書くと、式を評価した結果と置換します。<br>
数値になる場合は小数点以下1桁まで出力します。数値で小数点以下がいらないときにはparseInt()したりtoString()してください。

  * {=1+1} と書くと、2.0 と置換します。
  * {=info.mylistcomment?info.mylistcomment:"マイリストコメントはありません"} と書くと、<br>マイリストコメントがあればそれを、なければマイリストコメントはありませんと主コメする。
  * {=info.view_counter/info.comment_num} だとボカロ系で見られる聴き入り度。
  * 条件分岐もOK。
  * コミュニティ別コメント変更もできるし、夢がひろがりんぐ。
  * javascriptの解釈できるステートメントであればいいので、上級者ユーザーはnicolivehelper.jsを読みつついろいろ試してみるといいかも。

使用できる動画情報の例：
||info.cno||リク主のコメント番号。リクエストではないときは0||
||info.video_id||動画ID||
||info.title||タイトル||
||info.description||動画の詳細(先頭40文字)||
||info.first_retrieve||投稿日(UNIX時間)||
||info.length||再生時間(mm:ss形式)||
||info.length_ms||再生時間(ミリ秒)||
||info.view_counter||再生数||
||info.comment_num||コメント数||
||info.mylist_counter||マイリスト数||
||info.highbitrate||平均ビットレート(kbps)||
||info.pname||P名(D名)||
||info.mylistcomment||マイリストコメント。ないときはundefined||

||info.restrict.view_from||再生数(以上)||
||info.restrict.view_to||再生数(以下)||
||info.restrict.mylist_from||マイリスト数(以上)||
||info.restrict.mylist_to||マイリスト数(以下)||
||info.restrict.videolength||動画の時間(秒)以下||
||info.restrict.date_from||投稿日(以後)||
||info.restrict.date_to||投稿日(以前)||
||info.restrict.requiredkeyword||その動画のタグに含まれる必須キーワードのリスト||
||info.restrict.forbiddenkeyword||その動画のタグに含まれる禁止キーワード||
||info.restrict.numberofrequests||1人あたりのリクエスト受け付け最大数||


==Windows Live Messengerとの連携==

Helperを起動すると、Windows Live Messengerの再生中楽曲表示部分に、生放送の番組名を表示します。

  * 当然Windows専用の機能

http://wiki.nicolivehelper.googlecode.com/hg/Manual.attach/windowslivemessenger.png

==JSONファイルについて==

*{ "sm9": value, "sm10": value, "sm11": value }*<br>
のように、動画IDをキーに値が設定されているオブジェクトのJSONです。<br>
このリストにない動画の値は *0* になります。

==Tips and Q&A==

===no loginのダイアログが出る===
  * ツール、オプション、詳細、ネットワークから、キャッシュを消す。
  * 他のアドオン(拡張機能)を無効にしてみる<br>まずはニコニコ生放送ヘルパー以外を全て無効化して確認する。

===ウィンドウ座標をデフォルトに戻す===

比較的中級者～上級者向けの操作が必要なので要注意。

  # ロケーションバーで about:config
  # extensions.nicolivehelper.window-pos を探す
  # リセット


===最前面表示にならない===

Windowsでのみ効果があるようです。

Mac OS X 10.4 Tiger/Ubuntu(GNOME)は最前面表示にならず。
ウィンドウマネージャに依存する機能だから仕方ないかも。

というか…ウィンドウシステムやウィンドウマネージャに頼らず
FirefoxががんばってZオーダー順に並べている感じがする。だからダイアログとかが予想外に後ろに隠れたりするのかも。<br>
Windowsで最前面指定してもFirefoxウィンドウ内で最前面になるだけで、他のウィンドウにはZオーダーで負けてるし。XPCOM経由してWin32 APIから最前面にもできるけど、それやるとZオーダー管理がめんどくさそうだ。

===プログレスバーが表示されない===

これもOSによるようです。

||表示される||Windows Vista/XP, MacOSX, OpenSolaris 2009.06 ||
||表示されない|| その他 ||


===リクエスト、ストック登録に登録されない時===

リクエスト、ストックの登録は、主でもリクエスト制限などの縛りの影響を受けます。
縛りルールを逸脱するのは主でも許されないってことで。<br>
ただし、登録後に縛り設定しても、登録済みのものは残ります。

===動画再生時間について===
最大再生時間は分単位でしか設定できないけど、
次の動画を再生するまでの待ち時間も加わるので、
実際には、最大再生時間(分)＋待ち時間(秒)と、秒単位で次に飛ばせたり。

===ロスタイムについて===
配信開始ボタンを押したあと、生放送画面をリロードするだけでロスタイムは発生する。<br>
ツール問わない技。